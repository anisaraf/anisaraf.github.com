---
layout: post
title: Personal notes for coursera's SaaS class
tags: software,design, lecture notes
---

<p>
I am following coursera's <a href="https://www.coursera.org/saas/class/index">saas-class</a>  online, and using this post for
keeping track of progress/notes/links etc. These notes are very rough,
mostly a personal log of progress&hellip;
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Lecture notes </h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">Engineering Software is Different from Engineering Hardware (02/25) </h3>
<div class="outline-text-3" id="text-1-1">


</div>

<div id="outline-container-1-1-1" class="outline-4">
<h4 id="sec-1-1-1">Legacy code: old SW meet customer's needs, but difficult to evolve due to design elegance </h4>
<div class="outline-text-4" id="text-1-1-1">

</div>

</div>

<div id="outline-container-1-1-2" class="outline-4">
<h4 id="sec-1-1-2">Waterfall vs Agile </h4>
<div class="outline-text-4" id="text-1-1-2">

<ul>
<li>Requirements analysis and specification
</li>
<li>Architectural design
</li>
<li>Implementation
</li>
<li>Verfication
</li>
<li>Operations and Maintenance
</li>
<li>Works well for important software with specs
</li>
<li>Plan to throw one away - you are going to anyway ;)
</li>
<li>If a problem has no solution, it may not be a problem, but a
      fact, not to be solved, but to be coped with over time.(Peres's Law)
</li>
<li>Individuals and interactions over processes &amp; tools
</li>
<li>Working software over comprehensive documentation
</li>
<li>Customer collaboration over contract negotiation
</li>
<li>Responding to change over following a plan
</li>
<li>Embrace change as a fact of life
</li>
</ul>

</div>

</div>

<div id="outline-container-1-1-3" class="outline-4">
<h4 id="sec-1-1-3">Assurance </h4>
<div class="outline-text-4" id="text-1-1-3">

<ul>
<li>Verification - Did you build the thing <b>right</b>
</li>
<li>Validation - Did you build the <b>right</b> thing
</li>
<li>Testing - Exhaustive testing infeasible
</li>
<li>Use Automation, Coverage, Regression testing, Integration
      testing, Test Driven Design
</li>
</ul>

</div>

</div>

<div id="outline-container-1-1-4" class="outline-4">
<h4 id="sec-1-1-4">Productivity </h4>
<div class="outline-text-4" id="text-1-1-4">

<ul>
<li>Clarity via conciseness
<ul>
<li>Syntax: short and easier to read
</li>
<li>Raise the level of abstraction
</li>
</ul>

</li>
<li>Synthesis
<ul>
<li>Automatic code generation
</li>
</ul>

</li>
<li>Reuse
<ul>
<li>Procedures and functions
</li>
<li>Standardized Libraries
</li>
<li>OOP
</li>
<li>Design Patterns
</li>
</ul>

</li>
<li>Automation and tools
<ul>
<li>Replace tedious manual tasks with automation to save time,
        improve accuracy
</li>
<li>Concerns (Dependability/ UI)
</li>
<li>IMPORTANT SKILL - LEARN NEW TOOLS ALL THE TIME
</li>
</ul>

</li>
</ul>

</div>

</div>

<div id="outline-container-1-1-5" class="outline-4">
<h4 id="sec-1-1-5">Sotware as a service </h4>
<div class="outline-text-4" id="text-1-1-5">

<ul>
<li>SaaS delivers SW &amp; data as a service
</li>
<li>No install worries
</li>
<li>No data loss
</li>
<li>Easy for groups to interact with same data
</li>
<li>No compatibility hassles for developers
</li>
<li>1 copy - easier upgrades/features
</li>
</ul>

</div>

</div>

<div id="outline-container-1-1-6" class="outline-4">
<h4 id="sec-1-1-6">SOA </h4>
<div class="outline-text-4" id="text-1-1-6">

<ul>
<li>SW architecture where all components are designed to be services
</li>
<li>Apps composed of interoperable services
</li>
<li><a href="http://news.ycombinator.com/item?id=3101876">Steve Yeggi - SOA rant</a>
</li>
</ul>

</div>

</div>

<div id="outline-container-1-1-7" class="outline-4">
<h4 id="sec-1-1-7">Cloud computing, fallacies, pitfalls </h4>
<div class="outline-text-4" id="text-1-1-7">

<ul>
<li>Communication 
</li>
<li>Scalability
</li>
<li>Dependability
</li>
<li>Cluster - commodity hardware
</li>
<li>Utility Computing / Public Cloud Computing
</li>
<li>AWS - 42nd fastest computer in the world @ $700/hr!
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">SaaS Architecture </h3>
<div class="outline-text-3" id="text-1-2">


</div>

<div id="outline-container-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">Web as a Client-Server System; TCP/IP Intro </h4>
<div class="outline-text-4" id="text-1-2-1">

<ul>
<li>Internet: request/reply oriented
</li>
<li>Client/Server v-s Peer-to-Peer(bittorrent) architecture
</li>
<li>Localhost - 127.0.0.1
</li>
<li>IP - no-gaurantee, best-effort service
</li>
<li>TCP - makes IP reliable by detecting "dropped" packets
</li>
<li>TCP ports allow multiple TCP apps on same computer
</li>
<li>DNS - maps names to IP addresses
</li>
<li>HTTP - ASCII based request/reply protocol
</li>
<li>Protocol versions &amp; status code; Response Header and Response Body
</li>
<li>nc -l &lt;portnumber&gt;
</li>
<li>HTTP is stateless! Cookies to the rescue
</li>
<li>Per-user state: customization/ click tracking etc.
</li>
</ul>

</div>

</div>

<div id="outline-container-1-2-2" class="outline-4">
<h4 id="sec-1-2-2">3-tiered Shared-Nothing Architecture and Scaling </h4>
<div class="outline-text-4" id="text-1-2-2">

<ul>
<li>map URI to correct function
</li>
<li>pass arguments etc.
</li>
<li>invoke program on server/storage etc.
</li>
<li>Presentation layer/ App Layer/ Database layer
</li>
<li>Developer environment vs medium-scale deployment vs
      large-scale deployment
</li>
<li>Sharding v/s Replicate data
</li>
</ul>

</div>

</div>

<div id="outline-container-1-2-3" class="outline-4">
<h4 id="sec-1-2-3">Model-View-Controller Architecture </h4>
<div class="outline-text-4" id="text-1-2-3">

<ul>
<li>separate organization of data (Model) with presentation(UI)
      using a controller
</li>
<li>View 'indirectly' interacts with Model
</li>
<li>Each entity has a model, controller &amp; set of views
</li>
<li>Establishing connections between different views?
</li>
<li>Models often talk to each other!
</li>
<li>Alternatives
<ul>
<li>Page Controller  &lt;Each view has a controller&gt;
</li>
<li>Front Controller &lt;One Controller&gt;
</li>
<li>Template View (PHP) &lt;No controller - embeded PHP&gt;
</li>
</ul>

</li>
</ul>

</div>

</div>

<div id="outline-container-1-2-4" class="outline-4">
<h4 id="sec-1-2-4">Models, Databases and ActiveRecord </h4>
<div class="outline-text-4" id="text-1-2-4">

<ul>
<li>How to represent persisted object in storage
</li>
<li>In-Memory vs In-Storage?
</li>
<li>CRUD -&gt; serialize / deserealize
</li>
<li>ActiveRecord : every model knows how to CRUD itself
</li>
<li>Rails Models store data in RDBMS
</li>
<li>Each model in its own table, each row is an instance of the model
</li>
<li>Alternative: DataMapper -&gt; each model defines its own
      CRUD. Google App Engine. No RDMS -&gt; easier to scale?. Difficult
      to map relationships without models
</li>
</ul>

</div>

</div>

<div id="outline-container-1-2-5" class="outline-4">
<h4 id="sec-1-2-5">Controllers, Routes and RESTfulness </h4>
<div class="outline-text-4" id="text-1-2-5">

<ul>
<li>Route maps &lt;HTTP request, URI&gt; to controlloer action
</li>
<li>Rails routing:
<ul>
<li>Map URI -&gt; method
</li>
<li>Easily create &lt;URI&gt; calls
</li>
<li>Parse parameters passed to URI
</li>
<li>CRUD routes
</li>
<li>REST (Representation State Transfer)
</li>
<li>Each URI has all the information it needs to render its view
</li>
</ul>

</li>
</ul>

</div>

</div>

<div id="outline-container-1-2-6" class="outline-4">
<h4 id="sec-1-2-6">Templates, Views and HAML </h4>
<div class="outline-text-4" id="text-1-2-6">

<ul>
<li>Views -&gt; markup with interpolation
</li>
<li>Template View Pattern: HAML + closure
</li>
<li>Alternate: Transform View pattern
</li>
<li>You can put code in view, but you shouldn't. HAML makes it
      intentionally awkward.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3">Ruby and Rails Basics </h3>
<div class="outline-text-3" id="text-1-3">


</div>

<div id="outline-container-1-3-1" class="outline-4">
<h4 id="sec-1-3-1">Ruby 101 </h4>
<div class="outline-text-4" id="text-1-3-1">

<ul>
<li>Interpreted
</li>
<li>Object-Oriented
<ul>
<li>Every operation is a method call
</li>
</ul>

</li>
<li>Dynamically types - objects have types but variables don't
</li>
<li>Dynamic
<ul>
<li>add, modify code at runtime
</li>
<li>reflection
</li>
</ul>

</li>
<li>Naming conventions
<ul>
<li>ClassNames
</li>
<li>methods &amp; variables use snake<sub>case</sub> (?!)
</li>
<li>CONSTANTS(scoped) &amp; $GLOBALS
</li>
<li>symbols: immutable string whose value is itsemlf
<ul>
<li>:rails.to<sub>s</sub> == "rails"
          "rails".to_sym == :rails
          :rails == "rails" =&gt; false
</li>
<li>A symbol specifices that it is one of a fixed set of
          strings, and not a random string
</li>
</ul>

</li>
<li>There are no declarations
<ul>
<li>local variables myst be assigned before use
</li>
<li>instance &amp; class variables ==nil until assigned
</li>
<li>OK x=3; x = 'foo'
</li>
<li>Array -&gt; no type x = [1, 'two', :three]
</li>
<li>Hash: w = {'a' =&gt; 1, :b=&gt;[2,3]}
</li>
</ul>

</li>
<li>Methods -&gt; everything passed by reference
</li>
<li><a href="http://rubular.com">http://rubular.com</a> for your regex needs
</li>
<li>regex syntax is simiar to perl
</li>
</ul>

</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-2" class="outline-4">
<h4 id="sec-1-3-2">Ruby Objects and Methods </h4>
<div class="outline-text-4" id="text-1-3-2">

<ul>
<li>Even integers and nil are true objects
</li>
<li>my<sub>str</sub>.length =&gt; my<sub>str</sub>.send(:length)
</li>
<li>"implicit conversion" is not in the type system but in the
      instance methods! Whoever is the receiver of the method decides
      what to do with it.
</li>
<li>a.b means -&gt; call method b on object a! ALWAYS
</li>
<li>&lt;&lt; destructively modifies its receivers
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-3" class="outline-4">
<h4 id="sec-1-3-3">OOP in Ruby </h4>
<div class="outline-text-4" id="text-1-3-3">

<ul>
<li>class SavingsAccount &lt; Account #inheritance
</li>
<li>constructor: initialize
</li>
<li>@balance -&gt; instance variable
</li>
<li>need to define getter/setter def balance, def balance= {special syntax}
</li>
<li>@@bank<sub>name</sub> #class (static) variable
</li>
<li>def self.bank<sub>name</sub> {self -&gt; class(static) method name}
</li>
<li>A class is an instance of Class!
</li>
<li>attr<sub>accessor</sub> :balance {easier to create a simple getter/setters}
</li>
<li>no multi-inheritance (mix-in!)
</li>
<li>everything is a method call!
</li>
<li>most "operators" actually instance methods
</li>
<li>destructive methods have ! at the end
</li>
<li>? after a method call means it returns a boolean and has NO side effects
</li>
<li>! after a method call means it modifies the object it is called on OR the parameters passed in. This seems to be inconsistent at best.
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-4" class="outline-4">
<h4 id="sec-1-3-4">Ruby Metaprogramming </h4>
<div class="outline-text-4" id="text-1-3-4">

<ul>
<li>acct.deposit(euro<sub>to</sub><sub>dollars</sub>(100))? Nope - lets do it in an
      awesome way
</li>
<li>acct.deposit(20.euros)! Open Numeric class and define euros
      class Numeric; def euros; self * 1.3 ; end
</li>
<li>method<sub>missing</sub>! -&gt; if you try to do a method that doesn't exist
</li>
<li>gets "name of the method" and "params"
</li>
<li>if method<sub>id</sub>.to<sub>s</sub> == 'euro'
        self.send('euros')
      else 
        super  #default
</li>
<li>how about more currencies? Use a hash and method<sub>missing</sub> to do
      some cool stuff ;)
</li>
<li>You can "reopen" any calss at any time and add stuff to it!
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-5" class="outline-4">
<h4 id="sec-1-3-5">Ruby blocks, iterators, functional idioms </h4>
<div class="outline-text-4" id="text-1-3-5">

<ul>
<li>If you are iterating with an index, you are probably doing it wrong!
</li>
<li>my<sub>array</sub>.each do |elt| &hellip; end
</li>
<li>each class kind of handles it's own iteration
</li>
<li>Expression Orientation
</li>
</ul>


</div>

</div>

<div id="outline-container-1-3-6" class="outline-4">
<h4 id="sec-1-3-6">Mixins and Duck Typing </h4>
<div class="outline-text-4" id="text-1-3-6">

<ul>
<li>Duck Typing - similar to java interfaces
</li>
<li>ruby really doesn't care about types as long as the objects have the
  appropriate methods
</li>
<li>Modules - can't instantiate it (like abstract classes
  somewhat). Used for namespacing/ Mixins etc.
</li>
<li>include MyModule (simiar to #include in C++)
</li>
<li>checks A -&gt; mixin modules -&gt; method<sub>missing</sub> -&gt; punts to super class
</li>
<li>Example enumerable! - assumes you can respond to each and provides a
  whole bunch of methods like any, collect, find, etc.
</li>
<li>Read documentation to figure out what methods needs to be
  implemented for a Mixin to work
</li>
<li>File.open('file').select {|s| s=~/aeiou/}! Uses IO#each and String#&lt;=&gt;
</li>
<li>Modules reuse behaviors - Enumerable, Comparable
</li>
<li>Classes reuse implementation!
</li>
<li>Prefer composition over inheritance! (Mixin vs inheritance)
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-7" class="outline-4">
<h4 id="sec-1-3-7">Yield </h4>
<div class="outline-text-4" id="text-1-3-7">

<ul>
<li>Blocks (anonymous lambda)
</li>
<li>Ruby -&gt; here is some code to apply to every element, go handle your
  own iteration. Contrast with java world of creating iterators etc.
</li>
<li>yield! closures! yummy :)
</li>
<li>Blocks are closures! They carry their environments
</li>
<li>Duck Typing, Blocks, Iterators, Closures, Annoymous lamdas
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-8" class="outline-4">
<h4 id="sec-1-3-8">Databases &amp; Migrations </h4>
<div class="outline-text-4" id="text-1-3-8">

<ul>
<li>Database is golden! Rails provides 3 databases dev/production and
  test environments each have own DB!!!!
</li>
<li>How to make changes to DB? Rails solution - migration - script
  describing changes, portable across DB types (mysql, postgres etc!)
</li>
<li>Can identify each migration, and some migrations can even be
  rolledback
</li>
<li>Can version your migrations - holy moly!
</li>
<li>Theme: don't do it - automate it!
</li>
<li>rails generate migration &ndash; def up; def down (rollback!)
</li>
<li>rake db:migrate (Apply migration to development)
</li>
<li>Production (heroku): heroku rake db:migrate
</li>
<li>Rails maintains a record of which migrations have been applied -
  running migrations is idempotent :)
</li>
<li>Augumenting app functionality -&gt; add models, view, controller
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-9" class="outline-4">
<h4 id="sec-1-3-9">ActiveRecord Basics </h4>
<div class="outline-text-4" id="text-1-3-9">

<ul>
<li>Subclass from ActiveRecord::Base
</li>
<li>connects to a model
</li>
<li>Makes CRUD simple simple simple
</li>
<li>Database table name derived from Models name Movie-&gt;movies
</li>
<li>Database table column names are getters/setters
<ul>
<li>differs from attr<sub>reader</sub>; a lot of stuff goes on under the hood
</li>
</ul>

</li>
<li>Creating <code>/</code> save/ save or save! (! throws exception if operation fails)
</li>
<li>Create = new + save
</li>
<li>new<sub>record</sub>? -&gt; works with id to determine if record exists etc.
</li>
<li>Movie.where("rating='PG'"); allows prepared statements as well
</li>
<li>where can be chained together efficiently
</li>
<li>Defrencing happens when defreneced - allows efficient chaining :)
</li>
<li>find<sub>*</sub>  allows finding by attributes; find<sub>all</sub><sub>by</sub><sub>rating</sub>,
  find<sub>by</sub><sub>rating</sub> etc.
</li>
<li>All find<sub>by</sub> methods are safe, unless you bang them ;)
</li>
<li>Update: modify attributes and save, or update<sub>attributes</sub>
</li>
<li>Transaction operations - either all are updated or none
</li>
<li>Destroy - destroy an instance method
</li>
<li>m.destroy &lt;-&gt; AR object is destroyed, but you can access the
    read-only copy (can't modify it)
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-10" class="outline-4">
<h4 id="sec-1-3-10">Controllers and Views </h4>
<div class="outline-text-4" id="text-1-3-10">

<ul>
<li>Create route in config/routes.rb
</li>
<li>Add the action in the appropriate *<sub>controller</sub>.rb
</li>
<li>Ensure there is a corresponding view!
</li>
<li>Model -&gt; methods to get/manipulate data
</li>
<li>Controller -&gt; get data from Model, make available to view
</li>
<li>Instance variables in controller are available in the view
</li>
<li>By default view is app/views/&lt;class&gt;/&lt;method&gt;.haml
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3-11" class="outline-4">
<h4 id="sec-1-3-11">Debugging </h4>
<div class="outline-text-4" id="text-1-3-11">

<ul>
<li>Print statements doesn't work as well in SaaS ;)
</li>
<li>LOGGING!
</li>
<li>
</li>
</ul>



</div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Homework </h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">Assignment 1 </h3>
<div class="outline-text-3" id="text-2-1">

<p><a href="http://spark-university.s3.amazonaws.com/berkeley-saas/homework/hw1.pdf">Instructions</a>
</p>
</div>

<div id="outline-container-2-1-1" class="outline-4">
<h4 id="sec-2-1-1">Part 1: fun with strings </h4>
<div class="outline-text-4" id="text-2-1-1">





<pre class="example">def palindrome?(str)
  x = str.downcase.gsub(/\W/, "")
  return x.reverse == x
end
</pre>





<pre class="example">require 'pp'
def count_words(str)
   counts = Hash.new(0)
   str.downcase.gsub(/\W/," ").scan(/\b\S+/) {|key| counts[key] = counts[key] + 1 }
  return counts;
end 
</pre>




</div>

</div>

<div id="outline-container-2-1-2" class="outline-4">
<h4 id="sec-2-1-2">Part 2: Rock, Paper, Scissors </h4>
<div class="outline-text-4" id="text-2-1-2">





<pre class="example">require 'pp'
class WrongNumberOfPlayersError &lt; StandardError ;end
class NoSuchStrategyError &lt; StandardError ;end

def rps_game_winner(game)
  raise WrongNumberOfPlayersError unless game.length == 2
  game.each {|player, move| raise NoSuchStrategyError unless move =~ /(p|s|r)/i }
  rules = {:s =&gt; :r, :p =&gt; :s, :r =&gt; :p}
  :player1 = 0; :player2=1; :name=0; :strategy = 1
  case game[:player1][:strategy].downcase.to_sym
  when game[:player2][:strategy].downcase.to_sym
      return game[:player1]
  when rules[game[:player2][:strategy].downcase.to_sym]
    return game[:player1]
  else
    return game[:player2]
  end
end

 pp rps_game_winner([ [ "Armando", "S" ], [ "Dave", "P" ] ])  
</pre>


<p>
 ruby
</p>
<p>
The logic here is to flatten the whole array, and pick four elements
at a time and play the game. We keep doing this iteratively till we
are only left with two elements and thus know the winners!
</p>



<pre class="example">require 'enumerator'
def rps_tournament_winner(tournament)
  tournament = tournament.flatten
  while tournament.length &gt; 2 do
    tournament = tournament.each_slice(4).map { |p1,s1,p2,s2| rps_game_winner [[p1,s1],[p2,s2]] }.flatten
  end
  return tournament
end

# participants = [
#                 [[ ["Armando", "P"], ["Dave", "S"] ], [["Richard", "R"], ["Michael", "S"]]],
#                 [[ ["Allen", "S"], ["Omer", "P"] ], [ ["David E.", "R"], ["Richard X.", "P"]]]
#                ]
# pp participants
# pp rps_tournament_winner(participants)
# pp participants


</pre>




</div>

</div>

<div id="outline-container-2-1-3" class="outline-4">
<h4 id="sec-2-1-3">Part 3 </h4>
<div class="outline-text-4" id="text-2-1-3">




<pre class="example">def combine_anagrams(words)
  results = Hash.new([]);
  words.each {|word| results[word.downcase.split(//).sort.join] += [word]}
  return results.values;
end

#pp combine_anagrams(['cars', 'for', 'potatoes', 'racs', 'four','scar', 'creams', 'scream']);    
</pre>




</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Web Links </h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><a href="http://beta.saasbook.info/">http://beta.saasbook.info/</a> </h3>
<div class="outline-text-3" id="text-3-1">


</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2">Emacs Tips </h3>
<div class="outline-text-3" id="text-3-2">

<ul>
<li>Copy url at point  (C-c C-x C-w)
</li>
<li><a href="http://www.emacswiki.org/emacs/auto-indent-mode.el">EmacsWiki: auto-indent-mode.el</a>
</li>
</ul>

</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3">Ruby tips </h3>
<div class="outline-text-3" id="text-3-3">

<ul>
<li><a href="http://www.ruby-forum.com/topic/76083">Iterating over an array n element at a time</a>
</li>
<li><a href="http://stackoverflow.com/questions/1230279/how-to-chunk-an-array-in-ruby">How to chunk an array in Ruby - Stack Overflow </a>
</li>
<li><a href="http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/">How A Ruby Case Statement Works And What You Can Do With It</a>
</li>
<li><a href="http://stackoverflow.com/questions/5575172/doing-each-in-ruby-how-to-place-a-br-every-n-items">Doing each in Ruby, how to place a br every n items - Stack Overflow</a>
</li>
<li><a href="http://blog.jayfields.com/2008/03/ruby-inject.html">Jay Fields' Thoughts - Ruby: inject</a> - This is essentially a foldl
</li>
</ul>


</div>
</div>
</div>
