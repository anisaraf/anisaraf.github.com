---
layout: post
title: Personal notes for the stanford db-class
tags: ai, stanford, lecture notes
---

<p>
I am following the Stanford <a href="http://www.db-class.com">db-class</a> online, and using this post for
keeping track of progress/notes/links etc. These notes are very rough,
mostly a personal log of progress&hellip;
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Homework Notes </h2>
<div class="outline-text-2" id="text-1">

</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Lecture Notes </h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">Lecture 1: Intro to databases </h3>
<div class="outline-text-3" id="text-2-1">

<ul>
<li>Massive data; Persistent; Safe; Multi-user; Convenient; Convenient
      (Physical data layout independence; SQL - declarative); Efficient; Reliable
</li>
</ul>




<ul>
<li>Data Model - set of records; XML; graph 
    Schema vs Data ( types/ variables)
    DDL - Data Definition Language - set up schema
    DML - Data manipulation (querying / modification)
</li>
</ul>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">Lecture 2: Relational Model </h3>
<div class="outline-text-3" id="text-2-2">

<ul>
<li>Be careful of Null values! GPA &gt; 3.5 or GPA &lt;= 3.5 ( doesn't return null values)
</li>
</ul>


</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3">Lecture 2 : Query Relational Databases </h3>
<div class="outline-text-3" id="text-2-3">

<ul>
<li>Relational Algebra - formal (theory) ; SQL (actual/ implementation)
</li>
</ul>


</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4">XML Data </h3>
<div class="outline-text-3" id="text-2-4">

<ul>
<li>Tree hierarchy; XSLT (XML -&gt; HTML) ; 
</li>
<li>DTD
</li>
<li>XSD - Like DTD, data types, typed pointers, checked
     types(e.g. integers) etc.
<ul>
<li>XSD written in XML 
</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5">Relational Algebra </h3>
<div class="outline-text-3" id="text-2-5">

<ul>
<li>&sigma; <sub>condition</sub> (Expression) [select rows]
</li>
<li>Relational Algebra based on sets = removes duplicates (contrary
     to SQL - multisets)
</li>
<li>Cross-product combine two relations
</li>
<li>Natural Join - filtered crossproduct on common attributes and eliminates
     the duplicate attribute.
</li>
<li>theta join &sigma;<sub>&theta;</sub> (Expr1 &lt;natural join&gt; Expr2) [ joins
     in sql]
</li>
<li>Union [Vertical]
</li>
<li>Difference
</li>
<li>Intersection [ doesn't add expressive power]
</li>
<li>Rename operator &rho; disambiguation in self-joins
</li>
</ul>


</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6">SQL </h3>
<div class="outline-text-3" id="text-2-6">

<ul>
<li>Union: select cName as name from College union select sName as
     name from Student; (union eliminates duplicates)
</li>
<li>union all : retains duplicates
</li>
<li>intersect : students whos applied to both CS and EE
     select xx where major = 'EE' intersect select &hellip; where major = 'CS'
</li>
<li>except : applied to CS but not EE (difference operator)
<ul>
<li>select &hellip; where CS except select &hellip; where EE
</li>
</ul>

</li>
<li>Subqueries in where clause
<ul>
<li>Select sName from student where sId in (select sId from Apply
       where major = 'CS') equivalent to
</li>
<li>Select DISTINCT sName from Student,Apply where student.id =
       apply.id and major = 'CS'
</li>
<li>DISTINCT is needed to eliminate students who applied to
       multiple CS programs from showing up multiple times
</li>
<li>Replicate except with where in / not in
</li>
<li>Exists
</li>
<li>all (whether value has a relationship with all elements in the subquery)
<ul>
<li>select sName, GPA from Student where GPA &gt;= all (select GPA
         from Student); [student with highest GPA]
</li>
</ul>

</li>
<li>any [ satisfy with any one element in the set]

</li>
</ul>

</li>
<li>Aggregation
<ul>
<li>min, max, sum, avg, count
</li>
<li>Group by - allows to partition relation into groups and compute
       aggregate over each group
</li>
<li>Having - applies to groups generated by group by clause
</li>
<li>eg. select avg(GPA) from Student;
</li>
<li>Running averages
<ul>
<li>select avg(GPA) from Student,Apply where student.sID =
         apply.sID and major = 'CS'
</li>
<li>Has a problem where if a student applies to multiple colleges
         then he appears multiple times
</li>
<li>FIX: select avg(gpa) from student where sID in (select sID from
         Apply where major='CS'); (doesn't have multiple copies!)
</li>
<li>Write a subquery in select clause as long as it returns a
         single value
</li>
<li>GROUP BY only used with aggregate functions; returns 1 row
         for each group!
</li>
<li>Group by can have multiple cols: Group by cName, major
</li>
<li>Having is used in conjuction with aggregation; applied after
         the group by clause and applies conditions to entire group!
</li>
<li>Every query written by Group by and Having can be written
         without them!
</li>
</ul>

</li>
</ul>

</li>
</ul>

</div>

</div>

<div id="outline-container-2-7" class="outline-3">
<h3 id="sec-2-7">Null Values </h3>
<div class="outline-text-3" id="text-2-7">

<ul>
<li>undefined/unknown values
</li>
<li>select sID, sName, GPA from Student where GPA &gt; 3.5 or GPA &lt;= 3.5 or GPA is null;
</li>
<li>Null values are not picked up by mathematical constructs! We need
     the GPA is null to pick up null values
</li>
<li>count(distinct GPA) doesn't pick up null values!
</li>
<li>select distinct GPA from Student does pick up the null!
</li>
<li>Be careful of unexpected behaviors about nulls
</li>
</ul>


</div>

</div>

<div id="outline-container-2-8" class="outline-3">
<h3 id="sec-2-8">Modifications </h3>
<div class="outline-text-3" id="text-2-8">


<ul>
<li>Insert Into Table values (A<sub>1</sub>, &hellip; A<sub>n</sub>)
</li>
<li>Insert Into Table select values (insert's from another table)
</li>
<li>Delete from Table where Condition
</li>
<li>Update Table Set Attr=Expression WHERE Condition
</li>
<li>You can't specify target table 'Apply' for update in FROM clause;
     Some systems allow you to select from the table you are
     deleting(Postgres) while some systems don't allow it!
</li>
<li>Way around it is to create a temporary table and then use that to
     delete things.
<ul>
<li>create temporary table a1 select sID from Apply group by sID having count(distinct major) &gt; 2;
</li>
<li>delete from Apply where sID in (select sID from a1);
</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-2-9" class="outline-3">
<h3 id="sec-2-9">Relation Design Theory </h3>
<div class="outline-text-3" id="text-2-9">



</div>

<div id="outline-container-2-9-1" class="outline-4">
<h4 id="sec-2-9-1">Overview </h4>
<div class="outline-text-4" id="text-2-9-1">

<ul>
<li>How to design schemas
</li>
<li>Design 'anomalies'
<ul>
<li>Redundancy (how many times do we capture a tuple)
</li>
<li>Update anomaly (you can update facts differently in different places)
</li>
<li>Deletion anomaly (inadvertently delete someone in the database)
</li>
</ul>

</li>
<li>Design by decomposition
<ul>
<li>Start with mega relations
</li>
<li>Decompose into smaller, better relations
</li>
<li>Can do decomposition automatically by specifying properties
</li>
</ul>

</li>
<li>Properties and Normal Forms
<ul>
<li>Functional dependencies -&gt; Boyce-Codd Normal Form
</li>
<li>Multivalued dependencies -&gt; fourth normal form (Stricter)
</li>
</ul>

</li>
<li>Example: Apply(SSN, sName, cName)
<ul>
<li>Redundancy, UPdate and delete anamolies (SSN-sName pair)
</li>
<li>Functional Dependency SSN -&gt; sName
<ul>
<li>Same SSN always has same sName
</li>
<li>Should store this info only once
</li>
</ul>

</li>
<li>BCNF if A -&gt; B then A is a key!
</li>
<li>Decompose Student(SSN,sName), Apply(SSN,cName); it's a key!
</li>
<li>Multivalued Dependencies and 4NF
<ul>
<li>Apply(SSN, cName, HS)
</li>
<li>Multiplicative effect for HS (C * H tuples)
</li>
<li>No functional dependencies, so BCNF not addressed
</li>
<li>Multivalued dependency SSN -&gt;&gt; cName (implies SSN -&gt;&gt; HS)
<ul>
<li>Given SSN has every combination of cName with HS
</li>
<li>Should store each cName and each HS for an SSN once
</li>
</ul>

</li>
<li>4NF: If A -&gt;&gt; B then A is a key
</li>
<li>Decompose: Apply (SSN, cName) HighSchool (SSN, HS) [C + H tuples]
</li>
</ul>

</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-2-9-2" class="outline-4">
<h4 id="sec-2-9-2">Functional dependencies </h4>
<div class="outline-text-4" id="text-2-9-2">

<ul>
<li>Useful for compression/ reasoning about queries / generalization
      of keys
</li>
<li>A -&gt; B (if a values are same then b values are also same)
</li>
<li>Implies A is key, so we can't have two rows with same A and B
</li>
<li>Splitting Rule
<ul>
<li>A -&gt; B1, B2 etc.. then A -&gt; B1, A -&gt; B2
</li>
<li>Applies only to RHS not LHS
</li>
</ul>

</li>
<li>Combining Rule (combine RHS)
</li>
<li>A -&gt; B then A -&gt; A \intersection B ; A -&gt; A \union B
</li>
<li>Transitive rule is valid
</li>
<li>Closure of attributes - determines all attributes functionally
      determined by the LHS for which we are seeking closure; Add rhs's to the lhs and continue till
      nothing left to add
</li>
<li>Closure of attributes allows you to find keys!
</li>
<li>Compute cloure of A and if = all attributes then A is a key
</li>
<li>To find all keys consider every subset in increasing size order
      till we have a complete closure
</li>
<li>Does S2 follow from S1
<ul>
<li>Compute closure A based on S ; check if B in Set or
</li>
<li>Armstrong's axioms
</li>
</ul>

</li>
<li>Eventuall we want the minimal set of completely non-trivial FDs
      such that all FDs follow from the dependencies in this set!
</li>
</ul>

</div>

</div>

<div id="outline-container-2-9-3" class="outline-4">
<h4 id="sec-2-9-3">Boyce-Codd Normal Form </h4>
<div class="outline-text-4" id="text-2-9-3">

<ul>
<li>
</li>
</ul>


</div>

</div>

<div id="outline-container-2-9-4" class="outline-4">
<h4 id="sec-2-9-4">MVD &amp; 4NF </h4>
<div class="outline-text-4" id="text-2-9-4">

<ul>
<li>Separation of indenpendant facts
</li>
<li>
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-10" class="outline-3">
<h3 id="sec-2-10">Triggers and constraints </h3>
<div class="outline-text-3" id="text-2-10">

<ul>
<li>not null; primary key etc.
</li>
<li>Can only have one 'primary key'; can have cmpound primary key -
     which is different from multiple primary keys.
</li>
<li>null doesn't count as unique - you can get multiple values for
     unique constraint; bu usually not for primary keys
</li>
<li>check constraint - pretty cool but doesn't work in MySql
</li>
<li>check assertion - not implemented in mySql
</li>
<li>
</li>
<li>
</li>
</ul>


</div>

<div id="outline-container-2-10-1" class="outline-4">
<h4 id="sec-2-10-1">Referential Ingtegrit </h4>
<div class="outline-text-4" id="text-2-10-1">

<ul>
<li>from R.A to S.B
</li>
<li>A is called the foreign key
</li>
<li>B is usually required to be unique/primary
</li>
<li>Multi-attribut is allowed.
</li>
<li>Violating modifications
<ul>
<li>Insert into R
</li>
<li>Delete from S
</li>
<li>Update R.A/S.B
</li>
</ul>

</li>
<li>If Insert into R/Update R.A -&gt; if violation then error
</li>
<li>If Deltete/Update from S then special actions possible!
<ul>
<li>Restrict, Set Null, Cascade
</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-2-10-2" class="outline-4">
<h4 id="sec-2-10-2">Triggers </h4>
<div class="outline-text-4" id="text-2-10-2">

<ul>
<li>Move monitoring into RDMS
</li>
<li>Has repar logic
</li>
<li>Create Trigger name Before|After|Instead of events (insert,
      delte update of cols on T) [For Each Row?] &lt;- run it once for
      each affected row or once?
</li>
<li>old row as ; new row as ; old table as ; new table as
      (referencing variables) Row level trigger will trigger after
      each affected row, table level at table level.
</li>
<li>Tricky issues:
<ul>
<li>Row level va Statement level
</li>
<li>Multiple triggers at the same time
</li>
<li>Chained,cycles, self-triggering, nested triggers
</li>
<li>Conditions in when vs. as part of action
</li>
<li>Implementations vary significantly
</li>
<li>Non-deterministic final states!
</li>
<li>
</li>
</ul>

</li>
</ul>


</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Web Links </h2>
<div class="outline-text-2" id="text-3">

<ul>
<li><a href="http://www.reddit.com/r/dbclass">Reddit Discussions</a>
</li>
</ul>


</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Other </h2>
<div class="outline-text-2" id="text-4">


</div>
</div>
